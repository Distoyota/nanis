<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar - {{ reporte.mascota.nombre }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Editar Reporte de Mascota</h1>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="form-container">
            <form method="POST" action="{{ url_for('editar', id=reporte.id) }}">
                
                <!-- SECCIN 1: DATOS DEL PROPIETARIO -->
                <div class="form-section">
                    <h2 class="section-title"> Datos del Propietario</h2>
                    
                    <div class="form-group">
                        <label for="identificacion">Identificaci贸n</label>
                        <input type="text" id="identificacion" name="identificacion" 
                               value="{{ reporte.propietario.identificacion }}" disabled>
                        <small>La identificaci贸n no se puede modificar</small>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre_propietario">Nombre *</label>
                            <input type="text" id="nombre_propietario" name="nombre_propietario" 
                                   value="{{ reporte.propietario.nombre }}" required>
                        </div>

                        <div class="form-group">
                            <label for="apellido_propietario">Apellido *</label>
                            <input type="text" id="apellido_propietario" name="apellido_propietario" 
                                   value="{{ reporte.propietario.apellido }}" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefono_propietario">Tel茅fono *</label>
                            <input type="tel" id="telefono_propietario" name="telefono_propietario" 
                                   value="{{ reporte.propietario.telefono }}" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" 
                                   value="{{ reporte.propietario.email or '' }}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ciudad_propietario">Ciudad de residencia *</label>
                            <select id="ciudad_propietario" name="ciudad_propietario" required>
                                {% for ciudad in ciudades %}
                                <option value="{{ ciudad.id }}" 
                                    {% if reporte.propietario.ciudad_id == ciudad.id %}selected{% endif %}>
                                    {{ ciudad.nombre }} - {{ ciudad.departamento }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="direccion">Direcci贸n</label>
                            <input type="text" id="direccion" name="direccion" 
                                   value="{{ reporte.propietario.direccion or '' }}">
                        </div>
                    </div>
                </div>

                <!-- SECCIN 2: DATOS DE LA MASCOTA -->
                <div class="form-section">
                    <h2 class="section-title"> Datos de la Mascota</h2>
                    
                    <div class="form-group">
                        <label for="nombre_mascota">Nombre de la mascota *</label>
                        <input type="text" id="nombre_mascota" name="nombre_mascota" 
                               value="{{ reporte.mascota.nombre }}" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipo">Tipo *</label>
                            <select id="tipo" name="tipo" required>
                                <option value="Perro" {% if reporte.mascota.tipo == 'Perro' %}selected{% endif %}>Perro</option>
                                <option value="Gato" {% if reporte.mascota.tipo == 'Gato' %}selected{% endif %}>Gato</option>
                                <option value="Ave" {% if reporte.mascota.tipo == 'Ave' %}selected{% endif %}>Ave</option>
                                <option value="Conejo" {% if reporte.mascota.tipo == 'Conejo' %}selected{% endif %}>Conejo</option>
                                <option value="Otro" {% if reporte.mascota.tipo == 'Otro' %}selected{% endif %}>Otro</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="raza">Raza</label>
                            <input type="text" id="raza" name="raza" 
                                   value="{{ reporte.mascota.raza or '' }}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="color">Color *</label>
                            <input type="text" id="color" name="color" 
                                   value="{{ reporte.mascota.color }}" required>
                        </div>

                        <div class="form-group">
                            <label for="edad">Edad (a帽os)</label>
                            <input type="number" id="edad" name="edad" 
                                   value="{{ reporte.mascota.edad or '' }}" min="0" max="30">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="descripcion">Descripci贸n / Caracter铆sticas</label>
                        <textarea id="descripcion" name="descripcion" rows="3">{{ reporte.mascota.descripcion or '' }}</textarea>
                    </div>
                </div>

                <!-- SECCIN 3: DATOS DE LA PRDIDA -->
                <div class="form-section">
                    <h2 class="section-title"> Informaci贸n de la P茅rdida</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fecha_perdida">Fecha en que se perdi贸 *</label>
                            <input type="date" id="fecha_perdida" name="fecha_perdida" 
                                   value="{{ reporte.fecha.fecha }}" required>
                        </div>

                        <div class="form-group">
                            <label for="ciudad_perdida">Ciudad donde se perdi贸 *</label>
                            <select id="ciudad_perdida" name="ciudad_perdida" required>
                                {% for ciudad in ciudades %}
                                <option value="{{ ciudad.id }}" 
                                    {% if reporte.ciudad_perdida_id == ciudad.id %}selected{% endif %}>
                                    {{ ciudad.nombre }} - {{ ciudad.departamento }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="ubicacion_detallada">Ubicaci贸n detallada *</label>
                        <textarea id="ubicacion_detallada" name="ubicacion_detallada" rows="3" required>{{ reporte.ubicacion_detallada }}</textarea>
                    </div>

                    <div class="form-group">
                        <label for="estado">Estado del reporte *</label>
                        <select id="estado" name="estado" required>
                            <option value="Perdida" {% if reporte.estado == 'Perdida' %}selected{% endif %}>Perdida</option>
                            <option value="Encontrada" {% if reporte.estado == 'Encontrada' %}selected{% endif %}>Encontrada</option>
                            <option value="En B煤squeda" {% if reporte.estado == 'En B煤squeda' %}selected{% endif %}>En B煤squeda</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary"> Guardar Cambios</button>
                    <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
